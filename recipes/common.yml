modules:
  - type: os-release
    properties:
      ID: mine
      ID_LIKE: fedora
      NAME: Mine
      PRETTY_NAME: This Image is Mine
  - type: signing
  - type: brew
    nofile-limits: true # increase nofile limits
    brew-analytics: false # disable telemetry
  - type: files
    files:
      - source: system   # copies `files/system/*` (* means everything inside it) into your image's root folder `/`
        destination: /
  - type: dnf
    repos:
      cleanup: true
      files:
        - codium.repo
        - https://download.docker.com/linux/fedora/docker-ce.repo
      copr:
        - ublue-os/packages
    install:
      packages:
        - adw-gtk3-theme
        - libvirt-daemon-config-network
        - libvirt-daemon-kvm
        - qemu-kvm
        - libguestfs-tools
        - python3-libguestfs
        - steam # just like on bazzite
        - distrobox
        - tailscale
        - codium
        - uupd
        - waydroid
        - docker-ce 
        - docker-ce-cli
        - containerd.io
        - docker-buildx-plugin
        - docker-compose-plugin
    remove:
      auto-remove: false
      packages:
        - nvtop
        - htop
        - btop
        - gnome-software # bazaar is better anyways
  - type: default-flatpaks
    configurations:
      - notify: true
        scope: system
        repo:
          title: Flathub
        install:
          - app.zen_browser.zen
          - com.github.tchx84.Flatseal
          - io.github.flattool.Warehouse
          - net.nokyan.Resources
          - io.github.shiftey.Desktop
          - me.iepure.devtoolbox
          - org.libreoffice.LibreOffice
          - org.gnome.Calendar
          - io.github.kolunmi.Bazaar
          - org.inkscape.Inkscape
          - org.gnome.DejaDup
          - io.github.celluloid_player.Celluloid
          - com.mattjakeman.ExtensionManager
          - io.bassi.Amberol
  - type: systemd
    system:
      enabled:
        - uupd.service
        - docker.service
        - docker.socket
      disabled:
        - rpm-ostreed-automatic.timer
        - bootc-fetch-apply-updates.timer
  - type: gnome-extensions
    install:
      - Blur my Shell
      - AppIndicator and KStatusNotifierItem Support
      - Logo Menu
      - 5112 # Tailscale Status
      - 4470 # Media Controls
      - Grand Theft Focus
      - Removable Drive Menu
  - type: gschema-overrides
    include:
      - zz1-common.gschema.override
  - type: justfiles
    validate: true
    install: true
  - type: initramfs

