modules:
  - type: signing
  - type: brew
    nofile-limits: true # increase nofile limits
    brew-analytics: false # disable telemetry
  - type: files
    files:
      - source: system   # copies `files/system/*` (* means everything inside it) into your image's root folder `/`
        destination: /
  - type: dnf
    repos:
      cleanup: true
      files:
        - codium.repo
        - gum.repo
      copr:
        - ublue-os/packages
      nonfree: rpmfusion
    install:
      packages:
        - gum
        - gnome-shell
        - nautilus
        - tuned
        - tuned-ppd
        - bolt
        - boltctl
        - adw-gtk3-theme
        - libvirt-daemon-config-network
        - libvirt-daemon-kvm
        - qemu-kvm
        - libguestfs-tools
        - python3-libguestfs
        - fdk-aac 
        - fdk-aac.i686
        - steam # just like on bazzite
        - distrobox
        - tailscale
        - codium
        - uupd
        - waydroid
        - ptyxis
        - plymouth-plugin-script
      exclude:
        - gnome-software
    remove:
      auto-remove: false
      packages:
        - gnome-software
        - nvtop
        - htop
        - btop
        - libfdk-aac
  - type: default-flatpaks
    configurations:
      - notify: true
        scope: system
        repo:
          title: Flathub
        install:
          - app.zen_browser.zen
          - com.github.tchx84.Flatseal
          - io.github.flattool.Warehouse
          - net.nokyan.Resources
          - io.github.shiftey.Desktop
          - me.iepure.devtoolbox
          - org.libreoffice.LibreOffice
          - org.gnome.Calendar
          - org.inkscape.Inkscape
          - org.gnome.DejaDup
          - io.github.celluloid_player.Celluloid
          - com.mattjakeman.ExtensionManager
          - io.bassi.Amberol
          - io.github.kolunmi.Bazaar
          - org.gnome.TextEditor
          - com.github.wwmm.easyeffects
          - org.pipewire.Helvum
          - io.github.ungoogled_software.ungoogled_chromium
          - io.github.nozwock.Packet
          - org.gnome.Calculator
          - com.spotify.Client
          - io.github.nozwock.Packet
          - org.nickvision.tagger
          - org.gnome.SoundRecorder
          - io.github.vikdevelop.SaveDesktop
          - com.heroicgameslauncher.hgl
          - org.prismlauncher.PrismLauncher
          - org.nicotine_plus.Nicotine
          - io.anytype.anytype
  - type: systemd
    system:
      enabled:
        - uupd.service
        - tailscaled.service
        - podman.socket
      disabled:
        - rpm-ostreed-automatic.timer
        - bootc-fetch-apply-updates.timer
  - type: gnome-extensions
    install:
      - AppIndicator and KStatusNotifierItem Support
      - 5112 # Tailscale Status
      - 4470 # Media Controls
      - Grand Theft Focus
      - Removable Drive Menu
      - 4269 # Alphabetical app grid
      - Caffeine
  - type: gschema-overrides
    include:
      - zz1-common.gschema.override
  - type: justfiles
    validate: true
    install: true
  - type: script
    snippets:
      - "chmod +x /usr/bin/ugum"
      - "chmod +x /usr/share/bash-prexec"
    scripts:
      - plymouth.sh
  - type: initramfs
  - type: os-release
    properties:
      NAME: Mine
      PRETTY_NAME: This Image is Mine

